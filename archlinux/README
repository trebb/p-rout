Packaging for Arch Linux
========================

(1) Run updpkgsums in this directory.

(2) Run makepkg in this directory.

(3) Run mkaurball in this directory.

Both (1) and (2) will alter the PKGBUILD file.  Ignore/revert these
changes before committing to git.
    

Installing on Arch Linux
========================

(1) Install dependencies:

      pacman -S base-devel git wget dnsmasq gnuplot postgresql

(2) Create a user:

      useradd -m p-rout
      passwd p-rout
      visudo

        in visudo add the following line:
	  p-rout ALL=(ALL) ALL

(3) Initialize PostgreSQL:

      su postgres
      cd
      initdb -D /var/lib/postgres/data
      exit

(4) Start PostgreSQL:

      systemctl start postgresql
      systemctl enable postgresql

(5) Create database and user:

      su postgres
      cd
      createdb p_rout
      createuser -sP p-rout
        (set password=p-rout)
      exit

(6) Get packages from AUR:

      su p-rout
      cd
      wget https://aur.archlinux.org/packages/gu/guile-dbi/guile-dbi.tar.gz
      wget https://aur.archlinux.org/packages/gu/guile-dbd-postgresql/guile-dbd-postgresql.tar.gz
      wget https://aur.archlinux.org/packages/gu/guile-lib/guile-lib.tar.gz
      wget https://aur.archlinux.org/packages/gu/guile-json/guile-json.tar.gz
      wget https://aur.archlinux.org/packages/p-/p-rout-git/p-rout-git.tar.gz

(7) Unpack tar files from (6):

      tar -xzf <package>.tar.gz

(8) Build and install the packages:

      cd <package>
      makepkg -Ai


Updating p-rout on Arch Linux
=============================

(1) Repeat the installation:

      su p-rout
      cd
      rm -rf p-rout-git*
      wget https://aur.archlinux.org/packages/p-/p-rout-git/p-rout-git.tar.gz
      tar -xzf p-rout-git.tar.gz
      cd p-rout-git
      makepkg -i
      exit

(2) Restart the daemons:

      systemctl daemon-reload
      systemctl restart p-rout-collect p-rout-view
